<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="docView">

    <select id="getCardLossList" parameterType="map" resultType="map">
        /*getCardLossList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_CARD_LOSS A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <select id="getCardManager" parameterType="map" resultType="map">
        /*getCardManager*/
        SELECT
            *
        FROM
            CAM_MNG.DJ_CARD_MANAGER
        WHERE
            REPLACE(CARD_BA_NB, '-', '') = #{cardBaNb}
    </select>

    <insert id="insertCardLoss" parameterType="map">
        /*insertCardLoss*/
        INSERT INTO CAM_INSIDE.DJ_TP_CARD_LOSS
        (
            EMP_NM,
            EMP_SEQ,
            DEPT_SEQ,
            DEPT_NAME,
            CARD_NO,
            CARD_MST,
            CL_DE,
            CL_LOC,
            CL_ISS
        )
        VALUES
        (
            #{empName},
            #{empSeq},
            #{deptSeq},
            #{deptName},
            #{cardNo},
            #{cardMst},
            #{clDe},
            #{clLoc},
            #{clIss}
        )

        <selectKey keyProperty="tpClSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_CARD_LOSS'
        </selectKey>
    </insert>

    <update id="updateCardLoss" parameterType="map">
        /*updateCardLoss*/
        UPDATE CAM_INSIDE.DJ_TP_CARD_LOSS
        SET
            EMP_NM = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            CARD_NO = #{cardNo},
            CARD_MST = #{cardMst},
            CL_DE = #{clDe},
            CL_LOC = #{clLoc},
            CL_ISS = #{clIss}
        WHERE
            TP_CL_SN = #{tpClSn}
    </update>

    <select id="getCardLossData" parameterType="map" resultType="map">
        /*getCardLossData*/
        SELECT
            *
        FROM
            CAM_INSIDE.DJ_TP_CARD_LOSS
        WHERE
            TP_CL_SN = #{tpClSn}
    </select>

    <delete id="delCardLossData" parameterType="map">
        /*delCardLossData*/
        DELETE FROM CAM_INSIDE.DJ_TP_CARD_LOSS
        WHERE
            TP_CL_SN = #{tpClSn}
    </delete>

    <select id="getAccCertList" parameterType="map" resultType="map">
        /*getAccCertList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_ACC_CERT A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <insert id="insertAccCert" parameterType="map">
        /*insertAccCert*/
        INSERT INTO CAM_INSIDE.DJ_TP_ACC_CERT
        (
            EMP_NAME,
            EMP_SEQ,
            DEPT_SEQ,
            DEPT_NAME,
            ACC_CERT_TYPE,
            ACC_CERT_USE,
            STR_DE,
            END_DE
        )
        VALUES
        (
            #{empName},
            #{empSeq},
            #{deptSeq},
            #{deptName},
            #{accCertType},
            #{accCertUse},
            #{strDe},
            #{endDe}
        )

        <selectKey keyProperty="accCertSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_ACC_CERT'
        </selectKey>
    </insert>

    <update id="updateAccCert" parameterType="map">
        /*updateAccCert*/
        UPDATE CAM_INSIDE.DJ_TP_ACC_CERT
        SET
            EMP_NAME = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            ACC_CERT_TYPE = #{accCertType},
            ACC_CERT_USE = #{accCertUse},
            STR_DE = #{strDe},
            END_DE = #{endDe}
        WHERE
            ACC_CERT_SN = #{accCertSn}
    </update>

    <select id="getAccCertData" parameterType="map" resultType="map">
        /*getAccCertData*/
        SELECT
            *
        FROM
            CAM_INSIDE.DJ_TP_ACC_CERT
        WHERE
            ACC_CERT_SN = #{accCertSn}
    </select>

    <delete id="delAccCertData" parameterType="map">
        /*delAccCertData*/
        DELETE
        FROM
            CAM_INSIDE.DJ_TP_ACC_CERT
        WHERE
            ACC_CERT_SN = #{accCertSn}
    </delete>

    <insert id="insertCorpBank" parameterType="map">
        /*insertCorpBank*/
        INSERT INTO CAM_INSIDE.DJ_TP_CORP_BANK
        (
            EMP_NAME,
            EMP_SEQ,
            DEPT_SEQ,
            DEPT_NAME,
            PJT_SN,
            BANK,
            ISS_DE,
            USE_RMK,
            CORP_EXP,
            REG_EMP_SEQ
        )
        VALUES
        (
            #{empName},
            #{empSeq},
            #{deptSeq},
            #{deptName},
            #{pjtSn},
            #{bank},
            #{issDe},
            #{useRmk},
            #{corpExp},
            #{empSeq}
        )
        <selectKey keyProperty="corpBankSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_CORP_BANK'
        </selectKey>
    </insert>

    <update id="updateCorpBank" parameterType="map">
        /*updateCorpBank*/
        UPDATE CAM_INSIDE.DJ_TP_CORP_BANK
        SET
            EMP_NAME = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            PJT_SN = #{pjtSn},
            BANK = #{bank},
            ISS_DE = #{issDe},
            USE_RMK = #{useRmk},
            CORP_EXP = #{corpExp},
            MOD_EMP_SEQ = #{empSeq},
            MOD_DT = now()
        WHERE
            CORP_BANK_SN = #{corpBankSn}
    </update>

    <select id="getCorpBankData" parameterType="map" resultType="map">
        /*getCorpBankData*/
        SELECT
            *
        FROM
            CAM_INSIDE.DJ_TP_CORP_BANK
        WHERE
            CORP_BANK_SN = #{corpBankSn}
    </select>

    <select id="getCorpBankList" parameterType="map" resultType="map">
        /*getCorpBankList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE,
            (SELECT BS_TITLE FROM CAM_PJT_MNG.DJ_PROJECT WHERE PJT_SN = A.PJT_SN) AS BS_TITLE
        FROM
            CAM_INSIDE.DJ_TP_CORP_BANK A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <delete id="delCorpBank" parameterType="map">
        /*delCorpBank*/
        DELETE FROM CAM_INSIDE.DJ_TP_CORP_BANK
        WHERE
            CORP_BANK_SN = #{corpBankSn}
    </delete>

    <insert id="insertCorpCard" parameterType="map">
        /*insertCorpCard*/
        INSERT INTO CAM_INSIDE.DJ_TP_CORP_CARD
            (
                EMP_NAME,
                EMP_SEQ,
                DEPT_SEQ,
                DEPT_NAME,
                TYPE,
                APP_DE,
                APP_CNT,
                APP_ISS,
                REG_EMP_SEQ
            )
        VALUES
            (
                #{empName},
                #{empSeq},
                #{deptSeq},
                #{deptName},
                #{type},
                #{appDe},
                #{appCnt},
                #{appIss},
                #{regEmpSeq}
            )

        <selectKey keyProperty="corpCardSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_CORP_CARD'
        </selectKey>
    </insert>

    <update id="updateCorpCard" parameterType="map">
        /*updateCorpCard*/
        UPDATE CAM_INSIDE.DJ_TP_CORP_CARD
        SET
            EMP_NAME = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            TYPE = #{type},
            APP_DE = #{appDe},
            APP_CNT = #{appCnt},
            APP_ISS = #{appIss},
            MOD_EMP_SEQ = #{regEmpSeq},
            MOD_DT = now()
        WHERE
            CORP_CARD_SN = #{corpCardSn}
    </update>

    <select id="getCorpCardData" parameterType="map" resultType="map">
        /*getCorpCardData*/
        SELECT * FROM CAM_INSIDE.DJ_TP_CORP_CARD
        WHERE
            CORP_CARD_SN = #{corpCardSn}
    </select>

    <select id="getCorpCardList" parameterType="map" resultType="map">
        /*getCorpCardList*/
        SELECT
            *
        FROM
            CAM_INSIDE.DJ_TP_CORP_CARD
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <delete id="delCorpCard" parameterType="map">
        /*delCorpCard*/
        DELETE FROM CAM_INSIDE.DJ_TP_CORP_CARD
        WHERE
            CORP_CARD_SN = #{corpCardSn}
    </delete>
</mapper>