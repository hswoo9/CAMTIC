<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="docView">

    <select id="getCardLossList" parameterType="map" resultType="map">
        /*getCardLossList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_CARD_LOSS A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <select id="getCardManager" parameterType="map" resultType="map">
        /*getCardManager*/
        SELECT
            *
        FROM
            CAM_MNG.DJ_CARD_MANAGER
        WHERE
            REPLACE(CARD_BA_NB, '-', '') = #{cardBaNb}
    </select>

    <insert id="insertCardLoss" parameterType="map">
        /*insertCardLoss*/
        INSERT INTO CAM_INSIDE.DJ_TP_CARD_LOSS
        (
            EMP_NM,
            EMP_SEQ,
            DEPT_SEQ,
            DEPT_NAME,
            CARD_NO,
            CARD_MST,
            CL_DE,
            CL_LOC,
            CL_ISS
        )
        VALUES
        (
            #{empName},
            #{empSeq},
            #{deptSeq},
            #{deptName},
            #{cardNo},
            #{cardMst},
            #{clDe},
            #{clLoc},
            #{clIss}
        )

        <selectKey keyProperty="tpClSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_CARD_LOSS'
        </selectKey>
    </insert>

    <update id="updateCardLoss" parameterType="map">
        /*updateCardLoss*/
        UPDATE CAM_INSIDE.DJ_TP_CARD_LOSS
        SET
            EMP_NM = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            CARD_NO = #{cardNo},
            CARD_MST = #{cardMst},
            CL_DE = #{clDe},
            CL_LOC = #{clLoc},
            CL_ISS = #{clIss}
        WHERE
            TP_CL_SN = #{tpClSn}
    </update>

    <select id="getCardLossData" parameterType="map" resultType="map">
        /*getCardLossData*/
        SELECT
            TCL.*,
            DI.APPRO_KEY,
            DI.DOC_MENU_CD
        FROM
            CAM_INSIDE.DJ_TP_CARD_LOSS TCL
        LEFT JOIN DJ_CAMTIC.A_DOC_INFO DI ON TCL.DOC_ID = DI.DOC_ID
        WHERE
            TCL.TP_CL_SN = #{tpClSn}
    </select>

    <delete id="delCardLossData" parameterType="map">
        /*delCardLossData*/
        DELETE FROM CAM_INSIDE.DJ_TP_CARD_LOSS
        WHERE
            TP_CL_SN = #{tpClSn}
    </delete>

    <select id="getAccCertList" parameterType="map" resultType="map">
        /*getAccCertList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_ACC_CERT A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <insert id="insertAccCert" parameterType="map">
        /*insertAccCert*/
        INSERT INTO CAM_INSIDE.DJ_TP_ACC_CERT
        (
            EMP_NAME,
            EMP_SEQ,
            DEPT_SEQ,
            DEPT_NAME,
            ACC_CERT_TYPE,
            ACC_CERT_USE,
            STR_DE,
            END_DE
        )
        VALUES
        (
            #{empName},
            #{empSeq},
            #{deptSeq},
            #{deptName},
            #{accCertType},
            #{accCertUse},
            #{strDe},
            #{endDe}
        )

        <selectKey keyProperty="accCertSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_ACC_CERT'
        </selectKey>
    </insert>

    <update id="updateAccCert" parameterType="map">
        /*updateAccCert*/
        UPDATE CAM_INSIDE.DJ_TP_ACC_CERT
        SET
            EMP_NAME = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            ACC_CERT_TYPE = #{accCertType},
            ACC_CERT_USE = #{accCertUse},
            STR_DE = #{strDe},
            END_DE = #{endDe}
        WHERE
            ACC_CERT_SN = #{accCertSn}
    </update>

    <select id="getAccCertData" parameterType="map" resultType="map">
        /*getAccCertData*/
        SELECT
            *
        FROM
            CAM_INSIDE.DJ_TP_ACC_CERT
        WHERE
            ACC_CERT_SN = #{accCertSn}
    </select>

    <delete id="delAccCertData" parameterType="map">
        /*delAccCertData*/
        DELETE
        FROM
            CAM_INSIDE.DJ_TP_ACC_CERT
        WHERE
            ACC_CERT_SN = #{accCertSn}
    </delete>

    <insert id="insertCorpBank" parameterType="map">
        /*insertCorpBank*/
        INSERT INTO CAM_INSIDE.DJ_TP_CORP_BANK
        (
            EMP_NAME,
            EMP_SEQ,
            DEPT_SEQ,
            DEPT_NAME,
            PJT_SN,
            BANK,
            ISS_DE,
            USE_RMK,
            CORP_EXP,
            REG_EMP_SEQ
        )
        VALUES
        (
            #{empName},
            #{empSeq},
            #{deptSeq},
            #{deptName},
            #{pjtSn},
            #{bank},
            #{issDe},
            #{useRmk},
            #{corpExp},
            #{empSeq}
        )
        <selectKey keyProperty="corpBankSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_CORP_BANK'
        </selectKey>
    </insert>

    <update id="updateCorpBank" parameterType="map">
        /*updateCorpBank*/
        UPDATE CAM_INSIDE.DJ_TP_CORP_BANK
        SET
            EMP_NAME = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            PJT_SN = #{pjtSn},
            BANK = #{bank},
            ISS_DE = #{issDe},
            USE_RMK = #{useRmk},
            CORP_EXP = #{corpExp},
            MOD_EMP_SEQ = #{empSeq},
            MOD_DT = now()
        WHERE
            CORP_BANK_SN = #{corpBankSn}
    </update>

    <select id="getCorpBankData" parameterType="map" resultType="map">
        /*getCorpBankData*/
        SELECT
            *
        FROM
            CAM_INSIDE.DJ_TP_CORP_BANK
        WHERE
            CORP_BANK_SN = #{corpBankSn}
    </select>

    <select id="getCorpBankList" parameterType="map" resultType="map">
        /*getCorpBankList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE,
            (SELECT BS_TITLE FROM CAM_PJT_MNG.DJ_PROJECT WHERE PJT_SN = A.PJT_SN) AS BS_TITLE
        FROM
            CAM_INSIDE.DJ_TP_CORP_BANK A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <delete id="delCorpBank" parameterType="map">
        /*delCorpBank*/
        DELETE FROM CAM_INSIDE.DJ_TP_CORP_BANK
        WHERE
            CORP_BANK_SN = #{corpBankSn}
    </delete>

    <insert id="insertCorpCard" parameterType="map">
        /*insertCorpCard*/
        INSERT INTO CAM_INSIDE.DJ_TP_CORP_CARD
            (
                EMP_NAME,
                EMP_SEQ,
                DEPT_SEQ,
                DEPT_NAME,
                TYPE,
                APP_DE,
                APP_CNT,
                APP_ISS,
                REG_EMP_SEQ
            )
        VALUES
            (
                #{empName},
                #{empSeq},
                #{deptSeq},
                #{deptName},
                #{type},
                #{appDe},
                #{appCnt},
                #{appIss},
                #{regEmpSeq}
            )

        <selectKey keyProperty="corpCardSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_CORP_CARD'
        </selectKey>
    </insert>

    <update id="updateCorpCard" parameterType="map">
        /*updateCorpCard*/
        UPDATE CAM_INSIDE.DJ_TP_CORP_CARD
        SET
            EMP_NAME = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            TYPE = #{type},
            APP_DE = #{appDe},
            APP_CNT = #{appCnt},
            APP_ISS = #{appIss},
            MOD_EMP_SEQ = #{regEmpSeq},
            MOD_DT = now()
        WHERE
            CORP_CARD_SN = #{corpCardSn}
    </update>

    <select id="getCorpCardData" parameterType="map" resultType="map">
        /*getCorpCardData*/
        SELECT * FROM CAM_INSIDE.DJ_TP_CORP_CARD
        WHERE
            CORP_CARD_SN = #{corpCardSn}
    </select>

    <select id="getCorpCardList" parameterType="map" resultType="map">
        /*getCorpCardList*/
        SELECT
            *
        FROM
            CAM_INSIDE.DJ_TP_CORP_CARD
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <delete id="delCorpCard" parameterType="map">
        /*delCorpCard*/
        DELETE FROM CAM_INSIDE.DJ_TP_CORP_CARD
        WHERE
            CORP_CARD_SN = #{corpCardSn}
    </delete>

    <insert id="insertSignetTo" parameterType="map">
        /*insertSignetTo*/
        INSERT INTO CAM_INSIDE.DJ_TP_SIGNET_TO
            (
                USE_ISS,
                STR_DE,
                END_DE,
                SIGN_TYPE,
                SUB_TYPE,
                EMP_SEQ,
                EMP_NAME,
                DEPT_SEQ,
                DEPT_NAME,
                POSITION,
                REG_EMP_SEQ
            )
        VALUES
            (
                #{useIss},
                #{strDe},
                #{endDe},
                #{signType},
                #{subType},
                #{empSeq},
                #{empName},
                #{deptSeq},
                #{deptName},
                #{position},
                #{empSeq}
            )

        <selectKey keyProperty="signSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_SIGNET_TO'
        </selectKey>
    </insert>

    <update id="updateSignetTo" parameterType="map">
        /*updateSignetTo*/
        UPDATE CAM_INSIDE.DJ_TP_SIGNET_TO
        SET
            USE_ISS = #{useIss},
            SIGN_TYPE = #{signType},
            SUB_TYPE = #{subType},
            STR_DE = #{strDe},
            END_DE = #{endDe},
            EMP_SEQ = #{empSeq},
            EMP_NAME = #{empName},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            POSITION = #{position},
            MOD_EMP_SEQ = #{empSeq},
            MOD_DT = now()
        WHERE
            SIGN_SN = #{signSn}
    </update>

    <select id="getSignetToData" parameterType="map" resultType="map">
        /*getSignetToData*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_SIGNET_TO A
        WHERE
            SIGN_SN = #{signSn}
    </select>

    <select id="getSignetToList" parameterType="map" resultType="map">
        /*getSignetToList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_SIGNET_TO A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <delete id="delSignetTo" parameterType="map">
        /*delSignetTo*/
        DELETE FROM CAM_INSIDE.DJ_TP_SIGNET_TO
        WHERE
            SIGN_SN = #{signSn}
    </delete>

    <insert id="insertDisAsset" parameterType="map">
        /*insertDisAsset*/
        INSERT INTO CAM_INSIDE.DJ_TP_DIS_ASSET
            (
                EMP_NAME,
                EMP_SEQ,
                DEPT_SEQ,
                DEPT_NAME,
                ASSET_NO,
                MODEL,
                INS_AMT,
                PURC_LOC,
                ASSET_NM,
                DIS_ISS,
                DIS_ASSET_PB,
                INS_DE,
                DIS_ASSET_DE,
                REG_EMP_SEQ
            )
        VALUES
            (
                #{empName},
                #{empSeq},
                #{deptSeq},
                #{deptName},
                #{assetNo},
                #{model},
                #{insAmt},
                #{purcLoc},
                #{assetNm},
                #{disIss},
                #{disAssetPb},
                #{insDe},
                #{disAssetDe},
                #{empSeq}
            )
        <selectKey keyProperty="disAssetSn" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_INSIDE' AND TABLE_NAME = 'DJ_TP_DIS_ASSET'
        </selectKey>
    </insert>

    <update id="updateDisAsset" parameterType="map">
        /*updateDisAsset*/
        UPDATE CAM_INSIDE.DJ_TP_DIS_ASSET
        SET
            EMP_NAME = #{empName},
            EMP_SEQ = #{empSeq},
            DEPT_SEQ = #{deptSeq},
            DEPT_NAME = #{deptName},
            ASSET_NO = #{assetNo},
            MODEL = #{model},
            INS_AMT = #{insAmt},
            PURC_LOC = #{purcLoc},
            ASSET_NM = #{assetNm},
            DIS_ISS = #{disIss},
            DIS_ASSET_PB = #{disAssetPb},
            INS_DE = #{insDe},
            DIS_ASSET_DE = #{disAssetDe},
            MOD_EMP_SEQ = #{empSeq},
            MOD_DT = now()
        WHERE
            DIS_ASSET_SN = #{disAssetSn}
    </update>

    <select id="getDisAssetData" parameterType="map" resultType="map">
        /*getDisAssetData*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_DIS_ASSET A
        WHERE
            DIS_ASSET_SN = #{disAssetSn}
    </select>

    <select id="getDisAssetList" parameterType="map" resultType="map">
        /*getDisAssetList*/
        SELECT
            A.*,
            DATE_FORMAT(A.REG_DT, '%Y-%m-%d') AS REG_DE
        FROM
            CAM_INSIDE.DJ_TP_DIS_ASSET A
        WHERE
            EMP_SEQ = #{empSeq}
    </select>

    <delete id="delDisAsset" parameterType="map">
        /*delDisAsset*/
        DELETE FROM CAM_INSIDE.DJ_TP_DIS_ASSET
        WHERE
            DIS_ASSET_SN = #{disAssetSn}
    </delete>
</mapper>