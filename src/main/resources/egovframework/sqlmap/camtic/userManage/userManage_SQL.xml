<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="userManage">
    <select id="getUserPersonnelRecordList" parameterType="map" resultType="map">
        /* getUserPersonnelRecordList */
        SELECT
            a.emp_seq AS 'empSeq',
            a.erp_emp_seq AS 'erpEmpSeq',
            a.login_id AS 'loginId',
            a.EMP_NAME_KR AS 'empName',
            a.EMP_NAME_CN AS 'empNameCn',
            a.BDAY as 'bDay',
            a.ZIP_CODE AS 'zipCode',
            a.ADDR AS 'addr',
            a.OLD_ADDR AS 'oldAddr',
            a.ADDR_DETAIL AS 'addrDetail',
            a.ADDR_REFERENCES AS 'addrReferences',
            a.OFFICE_TEL_NUM AS 'officeTelNum',
            a.MOBILE_TEL_NUM AS 'mobileTelNum',
            a.EMG_TEL_NUM as 'emgTelNum',
            a.CAR_ACTIVE AS 'carActive',
            a.CAR_NUM AS 'carNum',
            a.JOIN_DAY AS 'joinDay',
            a.RESIGN_DAY AS 'resignDay'
        FROM
            cam_hr.dj_emp_info AS a
        WHERE
            a.EMP_SEQ = #{empSeq};
    </select>
    <select id="getEducationalList" parameterType="map" resultType="map">
        /* getEducationalList */
        SELECT
            B.*,
            C.HR_DT_CODE_NM AS GUBUN_CODE_NM,
            C2.HR_DT_CODE_NM AS DEGREE_CODE_NM,
            C3.HR_DT_CODE_NM AS GRADUATION_CODE_NM
        FROM
            CAM_HR.DJ_EMP_EDUCATIONAL AS B
        LEFT JOIN
            CAM_HR.DJ_HR_CODE C
        on B.GUBUN_CODE = CONCAT(C.HR_MC_CODE, C.HR_MD_CODE, C.HR_DT_CODE)
        LEFT JOIN
            CAM_HR.DJ_HR_CODE C2
        on B.DEGREE_CODE = CONCAT(C2.HR_MC_CODE, C2.HR_MD_CODE, C2.HR_DT_CODE)
        LEFT JOIN
            CAM_HR.DJ_HR_CODE C3
        ON B.GRADUATION_CODE = CONCAT(C3.HR_MC_CODE, C3.HR_MD_CODE, C3.HR_DT_CODE)
        WHERE
            B.EMP_SEQ = #{empSeq}
        AND
            B.admin_approval = 'Y'
        AND
            B.ACTIVE = 'Y'
        ORDER BY B.EDUCATIONAL_ID DESC;
    </select>
    <select id="getMilitarySvcInfo" parameterType="map" resultType="map">
        /* getMilitarySvcInfo */
        SELECT
            A.*,
            B.HR_DT_CODE_NM AS MILITARY_SVC_TYPE_NM
        FROM
            CAM_HR.DJ_EMP_MILITARY_SVC_INFO A
        LEFT JOIN
            CAM_HR.DJ_HR_CODE B
        ON MILITARY_SVC_TYPE = CONCAT(B.HR_MC_CODE, B.HR_MD_CODE, B.HR_DT_CODE)
        WHERE
            A.EMP_SEQ = #{empSeq}
        AND
            A.ADMIN_APPROVAL = 'Y'
    </select>
    <select id="getCareerInfoList" parameterType="map" resultType="map">
        /* getCareerInfoList */
        SELECT
            *
        FROM
            CAM_HR.DJ_EMP_CAREER A
        WHERE
            A.EMP_SEQ = #{empSeq}
        AND
            A.admin_approval = 'Y'
        AND
            A.ACTIVE = 'Y'
        ORDER BY A.CAREER_ID DESC;
    </select>

    <select id="getFamilyInfoList" parameterType="map" resultType="map">
        /* getFamilyInfoList */
        SELECT
            A.*,
            CASE WHEN A.INCLUDE_YN = 'Y' THEN '예'
                ELSE '아니오'
            END INCLUDE_TXT,
            B.HR_DT_CODE_NM AS FAMILY_CODE_TYPE_NM
        FROM
            CAM_HR.DJ_EMP_FAMILY_INFO A
        LEFT JOIN
            CAM_HR.DJ_HR_CODE B
        ON A.FAMILY_CODE = CONCAT(B.HR_MC_CODE, B.HR_MD_CODE, B.HR_DT_CODE)
        WHERE
            A.EMP_SEQ = #{empSeq}
        AND
            A.ADMIN_APPROVAL = 'Y'
        AND
            A.ACTIVE = 'Y'
        ORDER BY A.FAMILY_ID DESC;
    </select>

    <select id="getLicenceInfoList" parameterType="map" resultType="map">   
        SELECT
            *
        FROM
            cam_hr.dj_emp_info AS a
        LEFT JOIN
            cam_hr.dj_emp_certificate AS b
        ON
            a.EMP_SEQ = b.EMP_SEQ
        WHERE
            a.EMP_SEQ = #{empSeq}
        AND
            b.admin_approval = 'Y'
        AND
            b.ACTIVE = 'Y'
        ORDER BY b.CERTIFICATE_ID DESC;
    </select>

    <select id="getAppointInfoList" parameterType="map" resultType="map">
        /* getAppointInfoList */
        SELECT
            A.*,
            DATE_FORMAT(HISTORY_DT, '%Y-%m-%d') AS historyDt
        FROM
            CAM_HR.DJ_APNT_INFO A
        WHERE
            A.EMP_SEQ = #{empSeq}
        ORDER BY A.APNT_SN DESC;
    </select>

    <select id="getRewardInfoList" parameterType="map" resultType="map">
        /* getRewardInfoList */
        SELECT
            SUBSTRING(HER.REWORD_TYPE_NAME, 2, 4) AS SIDE_NAME,
            SUBSTRING(HER.REWORD_TYPE_NAME, 8) AS REWORD_TYPE_NAME1,
            REWORD_ID,
            EMP_SEQ,
            ERP_EMP_SEQ,
            EMP_NAME,
            DEPT_SEQ,
            DEPT_NAME,
            TEAM_SEQ,
            TEAM_NAME,
            POSITION_CODE,
            DUTY_CODE,
            REWORD_TYPE,
            REWORD_TYPE_NAME,
            RWD_SN,
            REWORD_DAY,
            REWORD_NAME,
            RWD_OFM,
            RWD_ST_COMP,
            RWD_FILE_SN,
            RWD_ETC,
            REWORD_AGENCY_NAME,
            REWORD_REASON,
            ACTIVE,
            ADMIN_APPROVAL,
            RETURNYN,
            ADMIN_APPROVAL_DATE,
            RETURNYN_DATE,
            REG_EMP_SEQ,
            REG_DATE,
            MOD_EMP_SEQ,
            MOD_DATE,
            REWARD_ADD_NO
        FROM
            CAM_HR.DJ_EMP_REWORD HER
        WHERE
            EMP_SEQ = #{empSeq}
        AND
            ADMIN_APPROVAL = 'Y'
        AND
            ACTIVE = 'Y'
        ORDER BY REWORD_ID DESC;
    </select>
    <select id="getDutyInfoList" parameterType="map" resultType="map">
        /*getDutyInfoList*/
        SELECT
            *
        FROM
            cam_hr.dj_emp_info AS a
        LEFT JOIN
            cam_hr.dj_emp_duty_info AS b
        ON
            a.EMP_SEQ = b.EMP_SEQ
        WHERE
            a.EMP_SEQ = #{empSeq}
        and
            b.admin_approval = 'Y'
        AND
            b.ACTIVE = 'Y'
        ORDER BY b.DUTY_ID DESC;
    </select>
    <select id="getProposalInfoList" parameterType="map" resultType="map">
        /*getProposalInfoList*/
        SELECT
            *
        FROM
            cam_hr.dj_emp_info AS a
        LEFT join
            cam_hr.dj_emp_proposal_info AS b
        ON
            a.EMP_SEQ = b.EMP_SEQ
        WHERE
            a.EMP_SEQ = #{empSeq}
        AND
            b.admin_approval = 'Y'
        AND
            b.ACTIVE = 'Y'
        ORDER BY PROPOSAL_ID DESC;
    </select>


<!--홈페이지 게시 포함
    <insert id="setUserReqDetailInsert" parameterType="map">
        /*setUserReqDetailInsert*/
        INSERT INTO CAM_HR.DJ_EMP_INFO(
            EMP_SEQ,
            EMP_NAME_KR,
            LOGIN_PASSWD,
            LOGIN_ID,
            RES_REGIS_NUM,
            CAPS_NUM,
            DUTY_CODE,
            DUTY_NAME,
            POSITION_CODE,
            POSITION_NAME,
            DEPT_NAME,
            DEPT_SEQ,
            DEPT_TEAM_NAME,
            JOB_DETAIL,
            BEFOR_CAREER,
            ACCOUNT_HOLDER,
            BANK_NAME,
            ACCOUNT_NUM,
            ZIP_CODE,
            ADDR,
            ADDR_DETAIL,
            OFFICE_TEL_NUM,
            MOBILE_TEL_NUM,
            EMAIL_ADDR,
            CAR_NUM,
            EMP_NAME_CN,
            EMP_NAME_EN,
            EMG_TEL_NUM,
            LEGAL_DOMICILE,
            HOBBY,
            RELIGION,
            SPECIALITY,
            WEIGHT,
            HEIGHT,
            VISIONL,
            VISIONR,
            HOME_PAGE_ACTIVE,
            WEDDING_ACTIVE,
            <if test="WEDDING_DAY != null and WEDDING_DAY != ''">
            WEDDING_DAY,
            </if>
            <if test="GRADE_NAME != null and GRADE_NAME != ''">
                GRADE_NAME,
            </if>
            <if test="DEGREE_CODE != null and DEGREE_CODE != ''">
                DEGREE_CODE,
            </if>
            BLOOD_TYPE,
            DIVISION,
            DIVISION_SUB,
            REG_EMP_SEQ,
            ACTIVE,
            CAR_ACTIVE,
            OCCUPATION_CODE,
            JOIN_DAY,
            WORK_STATUS_CODE,
            LUNAR_CAL,
            CTR_ST_DAY,
            CTR_EN_DAY,
            WEEK_WORK_TIME,
            NICK_NAME,
            CONTRACT,
            SCHOOL,
            DEGREE,
            DEPARTMENT,
            GRADE,
            STUDENT_ID,
            QUALIFICATION,
            LAST_DEGREE,
            CAREER,
            MILITARY,
            SIGNIFICANT,
            BDAY,
            TEMP_DIVISION
        )VALUES(
            (SELECT MAX(CAST(A.EMP_SEQ AS UNSIGNED))+1 FROM CAM_HR.DJ_EMP_INFO A),
            #{EMP_NAME_KR},
            #{LOGIN_PASSWD},
            #{LOGIN_ID},
            #{RES_REGIS_NUM},
            #{CAPS_NUM},
            #{DUTY_CODE},
            #{DUTY_NAME},
            #{POSITION_CODE},
            #{POSITION_NAME},
            #{DEPT_NAME},
            #{DEPT_SEQ},
            #{DEPT_TEAM_NAME},
            #{JOB_DETAIL},
            #{BEFOR_CAREER},
            #{ACCOUNT_HOLDER},
            #{BANK_NAME},
            #{ACCOUNT_NUM},
            #{ZIP_CODE},
            #{ADDR},
            #{ADDR_DETAIL},
            #{OFFICE_TEL_NUM},
            #{MOBILE_TEL_NUM},
            #{EMAIL_ADDR},
            #{CAR_NUM},
            #{EMP_NAME_CN},
            #{EMP_NAME_EN},
            #{EMG_TEL_NUM},
            #{LEGAL_DOMICILE},
            #{HOBBY},
            #{RELIGION},
            #{SPECIALITY},
            #{WEIGHT},
            #{HEIGHT},
            #{VISIONL},
            #{VISIONR},
            #{HOME_PAGE_ACTIVE},
            #{WEDDING_ACTIVE},
            <if test="WEDDING_DAY != null and WEDDING_DAY != ''">
                #{WEDDING_DAY},
            </if>
            <if test="GRADE_NAME != null and GRADE_NAME != ''">
                #{GRADE_NAME},
            </if>
            <if test="DEGREE_CODE != null and DEGREE_CODE != ''">
                #{DEGREE_CODE},
            </if>
            #{BLOOD_TYPE},
            #{division},
            #{divisionSub},
            #{regEmpSeq},
            #{ACTIVE},
            #{CAR_ACTIVE},
            #{OCCUPATION_CODE},
            #{JOIN_DAY},
            'Y',
            #{LUNAR_CAL},
            #{CTR_ST_DAY},
            #{CTR_EN_DAY},
            #{WEEK_WORK_TIME},
            #{NICK_NAME},
            #{CONTRACT},
            #{SCHOOL},
            #{DEGREE},
            #{DEPARTMENT},
            #{GRADE},
            #{STUDENT_ID},
            #{QUALIFICATION},
            #{LAST_DEGREE},
            #{CAREER},
            #{MILITARY},
            #{SIGNIFICANT},
            #{BDAY},
            #{TEMP_DIVISION}
        )
    </insert>-->

    <insert id="setUserReqDetailInsert" parameterType="map">
        /*setUserReqDetailInsert*/
        INSERT INTO CAM_HR.DJ_EMP_INFO(
        EMP_SEQ,
        EMP_NAME_KR,
        LOGIN_PASSWD,
        LOGIN_ID,
        RES_REGIS_NUM,
        CAPS_NUM,
        DUTY_CODE,
        DUTY_NAME,
        POSITION_CODE,
        POSITION_NAME,
        DEPT_NAME,
        DEPT_SEQ,
        DEPT_TEAM_NAME,
        JOB_DETAIL,
        BEFOR_CAREER,
        ACCOUNT_HOLDER,
        BANK_NAME,
        ACCOUNT_NUM,
        ZIP_CODE,
        ADDR,
        ADDR_DETAIL,
        OFFICE_TEL_NUM,
        MOBILE_TEL_NUM,
        EMAIL_ADDR,
        CAR_NUM,
        EMP_NAME_CN,
        EMP_NAME_EN,
        EMG_TEL_NUM,
        LEGAL_DOMICILE,
        HOBBY,
        RELIGION,
        SPECIALITY,
        WEIGHT,
        HEIGHT,
        VISIONL,
        VISIONR,
        <if test="genderCode != null and genderCode != ''">
            GENDER_CODE,
        </if>
        WEDDING_ACTIVE,
        <if test="WEDDING_DAY != null and WEDDING_DAY != ''">
            WEDDING_DAY,
        </if>
        <if test="GRADE_NAME != null and GRADE_NAME != ''">
            GRADE_NAME,
        </if>
        <if test="DEGREE_CODE != null and DEGREE_CODE != ''">
            DEGREE_CODE,
        </if>
        BLOOD_TYPE,
        DIVISION,
        DIVISION_SUB,
        REG_EMP_SEQ,
        ACTIVE,
        CAR_ACTIVE,
        OCCUPATION_CODE,
        JOIN_DAY,
        WORK_STATUS_CODE,
        LUNAR_CAL,
        CTR_ST_DAY,
        CTR_EN_DAY,
        WEEK_WORK_TIME,
        NICK_NAME,
        CONTRACT,
        SCHOOL,
        DEGREE,
        DEPARTMENT,
        GRADE,
        STUDENT_ID,
        QUALIFICATION,
        LAST_DEGREE,
        CAREER,
        MILITARY,
        SIGNIFICANT,
        BDAY,
        TEMP_DIVISION
        )VALUES(
        (SELECT MAX(CAST(A.EMP_SEQ AS UNSIGNED))+1 FROM CAM_HR.DJ_EMP_INFO A),
        #{EMP_NAME_KR},
        #{LOGIN_PASSWD},
        #{LOGIN_ID},
        #{RES_REGIS_NUM},
        #{CAPS_NUM},
        #{DUTY_CODE},
        #{DUTY_NAME},
        #{POSITION_CODE},
        #{POSITION_NAME},
        #{DEPT_NAME},
        #{DEPT_SEQ},
        #{DEPT_TEAM_NAME},
        #{JOB_DETAIL},
        #{BEFOR_CAREER},
        #{ACCOUNT_HOLDER},
        #{BANK_NAME},
        #{ACCOUNT_NUM},
        #{ZIP_CODE},
        #{ADDR},
        #{ADDR_DETAIL},
        #{OFFICE_TEL_NUM},
        #{MOBILE_TEL_NUM},
        #{EMAIL_ADDR},
        #{CAR_NUM},
        #{EMP_NAME_CN},
        #{EMP_NAME_EN},
        #{EMG_TEL_NUM},
        #{LEGAL_DOMICILE},
        #{HOBBY},
        #{RELIGION},
        #{SPECIALITY},
        #{WEIGHT},
        #{HEIGHT},
        #{VISIONL},
        #{VISIONR},
        <if test="genderCode != null and genderCode != ''">
            #{genderCode},
        </if>
        #{WEDDING_ACTIVE},
        <if test="WEDDING_DAY != null and WEDDING_DAY != ''">
            #{WEDDING_DAY},
        </if>
        <if test="GRADE_NAME != null and GRADE_NAME != ''">
            #{GRADE_NAME},
        </if>
        <if test="DEGREE_CODE != null and DEGREE_CODE != ''">
            #{DEGREE_CODE},
        </if>
        #{BLOOD_TYPE},
        #{division},
        #{divisionSub},
        #{regEmpSeq},
        #{ACTIVE},
        #{CAR_ACTIVE},
        #{OCCUPATION_CODE},
        #{JOIN_DAY},
        'Y',
        #{LUNAR_CAL},
        #{CTR_ST_DAY},
        #{CTR_EN_DAY},
        #{WEEK_WORK_TIME},
        #{NICK_NAME},
        #{CONTRACT},
        #{SCHOOL},
        #{DEGREE},
        #{DEPARTMENT},
        #{GRADE},
        #{STUDENT_ID},
        #{QUALIFICATION},
        #{LAST_DEGREE},
        #{CAREER},
        #{MILITARY},
        #{SIGNIFICANT},
        #{BDAY},
        #{TEMP_DIVISION}
        )

        <selectKey keyProperty="empSeq" resultType="Integer" order="BEFORE">
            SELECT MAX(CAST(A.EMP_SEQ AS UNSIGNED))+1 FROM CAM_HR.DJ_EMP_INFO A
        </selectKey>
    </insert>

    <select id="getCodeList" parameterType="map" resultType="map">
        SELECT
            *
        FROM
            cam_hr.dj_hr_code
        WHERE
            ACTIVE = 'Y'
    </select>
    <select id="getDeptCodeList2" parameterType="map" resultType="map">
        /*getDeptCodeList2*/
        SELECT
            DI.DEPT_NAME AS deptName,
            DI.DEPT_SEQ AS deptSeq
        FROM
            CAM_HR.DJ_DEPT_INFO DI
        WHERE
            DI.DEPT_LEVEL = 1
        ORDER BY DI.DEPT_LEVEL, DI.ORDER_SN
    </select>

    <select id="getDeptCodeList" parameterType="map" resultType="map">
        /*getDeptCodeList*/
        SELECT
            DEPT_NAME AS text,
            DEPT_SEQ AS value
        FROM
            CAM_HR.DJ_DEPT_INFO
        WHERE
            PARENT_DEPT_SEQ = #{deptSeq}
        ORDER BY DEPT_LEVEL, ORDER_SN
    </select>
    <select id="getEmpInfoList" parameterType="map" resultType="map">
        SELECT
        HEI.*,
        CASE WHEN HDI.DEPT_LEVEL = 2 THEN (SELECT DEPT_SEQ FROM CAM_HR.DJ_DEPT_INFO DI WHERE HDI.PARENT_DEPT_SEQ = DI.DEPT_SEQ) ELSE HEI.DEPT_SEQ END AS DEPT_SEQ,
        CASE WHEN HDI.DEPT_LEVEL = 2 THEN (SELECT DEPT_NAME FROM CAM_HR.DJ_DEPT_INFO DI WHERE HDI.PARENT_DEPT_SEQ = DI.DEPT_SEQ) ELSE HEI.DEPT_NAME END AS DEPT_NAME1,
        CASE WHEN HDI.DEPT_LEVEL = 2 THEN HEI.DEPT_SEQ ELSE "" END AS TEAM_SEQ,
        CASE WHEN HDI.DEPT_LEVEL = 2 THEN HEI.DEPT_NAME ELSE "" END AS TEAM_NAME,
        date_format(HEI.JOIN_DAY,'%Y-%m-%d') AS JOIN_DAY2,
        (SELECT CM_CODE_NM FROM CAM_COMMON.DJ_COM_CODE WHERE CM_GROUP_CODE_ID = (SELECT CM_GROUP_CODE_ID FROM CAM_COMMON.DJ_COM_GROUP_CODE WHERE CM_GROUP_CODE = "DUTY") AND CM_CODE = HEI.DUTY_CODE) AS DUTY_NM2,
        (SELECT CM_CODE_NM FROM CAM_COMMON.DJ_COM_CODE WHERE CM_GROUP_CODE_ID = (SELECT CM_GROUP_CODE_ID FROM CAM_COMMON.DJ_COM_GROUP_CODE WHERE CM_GROUP_CODE = "POSITION") AND CM_CODE = HEI.POSITION_CODE) AS POSITION_NM2,
        CASE WHEN HEI.DUTY_CODE IS NOT NULL THEN (SELECT SORT FROM CAM_COMMON.dj_com_code WHERE CM_GROUP_CODE_ID = 3 AND CM_CODE = HEI.DUTY_CODE)
        WHEN HEI.POSITION_CODE IS NOT NULL THEN (SELECT SORT FROM CAM_COMMON.dj_com_code WHERE CM_GROUP_CODE_ID = 4 AND CM_CODE = HEI.POSITION_CODE)
        ELSE 999 END SORT
        FROM
        CAM_HR.DJ_EMP_INFO	AS HEI
        LEFT JOIN
        CAM_HR.DJ_DEPT_INFO HDI ON HEI.DEPT_SEQ = HDI.DEPT_SEQ
        WHERE
            HEI.ACTIVE = 'Y'
        <if test='userGender != null and !"".equals(userGender)'>
        AND
            HEI.GENDER_CODE = #{userGender}
        </if>
        <if test='startDate != null and !"".equals(startDate)'>
            <![CDATA[
	    AND
	        DATE_FORMAT(#{startDate}, '%Y%m%d') >= DATE_FORMAT(HEI.JOIN_DAY, '%Y%m%d')
	    ]]>
        </if>
        AND
            ${userKind} like concat('%', #{kindContent} ,'%')
        <if test='deptComp != null and !"".equals(deptComp)'>
            AND
            HEI.DEPT_SEQ = #{deptComp}
            <if test='deptTeam == deptTeam or "".equals(deptTeam)'>
                OR
                HEI.DEPT_SEQ IN (
                                    SELECT
                                        DEPT_SEQ
                                    FROM
                                        CAM_HR.DJ_DEPT_INFO
                                    WHERE
                                        DEPT_SEQ = #{deptComp}
                                    OR
                                        PARENT_DEPT_SEQ = #{deptComp}
                                    )
            </if>
        </if>
        <if test='userGender != null and !"".equals(userGender)'>
            AND
            HEI.GENDER_CODE = #{userGender}
        </if>
        <if test='deptTeam != null and !"".equals(deptTeam)'>
            AND
            HEI.DEPT_SEQ = #{deptTeam}
        </if>
        <if test='arr != null and !"".equals(arr)'>
        AND
            <foreach collection="arr" item="item" separator="OR" open="(" close=")">
                ${item}
            </foreach>
        </if>
        <if test='dsI == "Y" or "Y".equals(dsI)'>
            AND
                TEMP_DIVISION = "Y"
        </if>
        ORDER BY SORT
    </select>
    <select id="getEmpInfoDetailList" parameterType="map" resultType="map">
        select
            A.*,
            SUBSTRING_INDEX(TRUNCATE(TIMESTAMPDIFF(month, A.JOIN_DAY, DATE_FORMAT(NOW(), '%Y-%m-%d')) / 12, 1), '.', 1) AS hire,
            SUBSTRING_INDEX(TRUNCATE(TIMESTAMPDIFF(month, A.JOIN_DAY, DATE_FORMAT(NOW(), '%Y-%m-%d')) / 12, 1), '.', -1) + 1 AS hire_mon
        from
        (SELECT
            ROUND((TO_DAYS(NOW()) - (TO_DAYS(REPLACE(STR_TO_DATE(a.BDAY, '%Y-%m-%d'), "-", "")))) / 365) AS age,
            a.*,
            (select dept_seq from CAM_HR.dj_dept_info where dept_seq = a.dept_seq and dept_level =1) as dept_lv1,
            (select parent_dept_seq from cam_hr.dj_dept_info where dept_seq = a.dept_seq and dept_level =2) as parent_dept_seq,
            (select dept_seq from CAM_HR.dj_dept_info where dept_seq = a.dept_seq and dept_level =2) as dept_lv2,
            date_format(a.JOIN_DAY,'%Y-%m-%d') AS JOIN_DAY2,
            date_format(a.RESIGN_DAY,'%Y-%m-%d') AS RESIGN_DAY2,
            case
            when a.appoint_gubun = '04' then (SELECT c.hr_dt_code_nm FROM CAM_HR.dj_hr_code AS c WHERE c.HR_MD_CODE = '07' and c.HR_DT_CODE = a.appoint_gubun_detail)
            else
            (SELECT c.hr_dt_code_nm FROM CAM_HR.dj_hr_code AS c WHERE c.HR_MD_CODE = '06' and c.HR_DT_CODE = a.appoint_gubun)
            END AS 'APPOINT_GUBUN_NM'
        FROM
            CAM_HR.dj_emp_info	AS a) as A
        WHERE
            1=1
            <if test='startDate != null and !"".equals(startDate)'>
                <![CDATA[
            AND
                DATE_FORMAT(#{startDate}, '%Y%m%d') >= DATE_FORMAT(a.JOIN_DAY, '%Y%m%d')
            ]]>
            </if>
            <if test='workStatusCode != null and !"".equals(workStatusCode)'>
                AND
                A.WORK_STATUS_CODE = #{workStatusCode}
            </if>
            <if test='searchDetail1 != null and !"".equals(searchDetail1)'>
                and
                A.DIVISION in (${searchDetail1})
            </if>
            <if test='searchDetail2 != null and !"".equals(searchDetail2)'>
                and
                A.GENDER_CODE in (${searchDetail2})
            </if>
            <if test='searchDetail3 != null and !"".equals(searchDetail3)'>
                and
                (A.DEPT_SEQ in (${searchDetail3})OR A.parent_dept_seq in (${searchDetail3})
                     <if test='searchDetail4 != null and !"".equals(searchDetail4)'>
                        or A.DEPT_SEQ in (${searchDetail4})
                     </if>
                )
            </if>
        <if test='searchDetail4 != null and !"".equals(searchDetail4)'>
            <if test='searchDetail3 == null or "".equals(searchDetail3)'>
                and
                    A.DEPT_SEQ in (${searchDetail4})
            </if>
        </if>
<!--            <if test='searchDetail3 != null and !"".equals(searchDetail3)'>-->
<!--                <if test='searchDetail4 != null and !"".equals(searchDetail4)'>-->
<!--                    and-->
<!--                    (A.parent_dept_seq in (${searchDetail3})-->
<!--                    or-->
<!--                    A.dept_lv2 in (${searchDetail4})-->
<!--                    or-->
<!--                    A.dept_lv1 in (${searchDetail3}))-->
<!--                </if>-->
<!--                <if test='searchDetail4 == null or "".equals(searchDetail4)'>-->
<!--                    and-->
<!--                    A.dept_lv1 in (${searchDetail3})-->
<!--                </if>-->
<!--            </if>-->
<!--            <if test='searchDetail4 != null and !"".equals(searchDetail4)'>-->
<!--                <if test='searchDetail3 != null and !"".equals(searchDetail3)'>-->
<!--                    and-->
<!--                    (A.parent_dept_seq in (${searchDetail3})-->
<!--                    or-->
<!--                    A.dept_lv2 in (${searchDetail4})-->
<!--                    or-->
<!--                    A.dept_lv1 in (${searchDetail3}))-->
<!--                </if>-->
<!--                <if test='searchDetail3 == null or "".equals(searchDetail3)'>-->
<!--                    and-->
<!--                    A.dept_lv2 in (${searchDetail4})-->
<!--                </if>-->
<!--            </if>-->
            <if test='searchDetail5 != null and !"".equals(searchDetail5)'>
                and
                A.DUTY_NAME in (${searchDetail5})
            </if>
            <if test='searchDetail6 != null and !"".equals(searchDetail6)'>
                <if test="sd6_flag > 1">
                    and
                    <![CDATA[
                        (A.age >= #{searchDetail6_1} AND A.age <= #{searchDetail6_2})
                   ]]>
                </if>
                <if test="sd6_flag == 1">
                    and
                    <![CDATA[
                        A.age >= #{searchDetail6}
                    ]]>
                </if>
            </if>
            <if test='searchDetail7 != null and !"".equals(searchDetail7)'>
                and
                SUBSTRING_INDEX(TRUNCATE(TIMESTAMPDIFF(month, A.JOIN_DAY, DATE_FORMAT(NOW(), '%Y-%m-%d')) / 12, 1), '.', 1) in (${searchDetail7})
            </if>
            <if test='searchDetail8 != null and !"".equals(searchDetail8)'>
                and
                A.DEGREE_CODE in (${searchDetail8})
            </if>
    </select>
    <insert id="setEducationalInfo" parameterType="map">
        /*setEducationalInfo*/
        INSERT INTO CAM_HR.DJ_EMP_EDUCATIONAL_TMP(
              EMP_SEQ
             ,EMP_NAME
             ,ADMISSION_DAY
             ,GRADUATION_DAY
             ,DEGREE_CODE
             ,REG_EMP_SEQ
             ,REG_DATE
             ,SCHOOL_NAME
             ,RMK
             ,GUBUN_CODE
             ,GRADUATION_CODE
             ,SCORE
        )VALUES (
            #{EMP_SEQ}
            ,#{EMP_NAME}
            ,#{sDate}
            ,#{eDate}
            ,#{degree}
            ,#{EMP_SEQ}
            ,NOW()
            ,#{school}
            ,#{bmk}
            ,#{gubun}
            ,#{graduation}
            ,#{score}
        )
        <selectKey keyProperty="educationalId" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_HR' AND TABLE_NAME = 'DJ_EMP_EDUCATIONAL'
        </selectKey>
    </insert>

    <insert id="setCareerInfo" parameterType="map">
        /*setCareerInfo*/
        INSERT INTO cam_hr.dj_emp_career(
              EMP_SEQ
             ,EMP_NAME
             ,EMPLOY_DEPT_NAME
             ,JOIN_DAY
             ,RESIGN_DAY
             ,POSITION_OR_DUTY
             ,CAREER_PERIOD
             ,REG_EMP_SEQ
             ,REG_DATE
             ,RMK
             ,MAIN_TASK
             ,CAREER_MONTH
        )VALUES (
            #{EMP_SEQ}
            ,#{EMP_NAME}
            ,#{place}
            ,#{sDate}
            ,#{eDate}
            ,#{position}
            ,#{dateY}
            ,#{EMP_SEQ}
            ,NOW()
            ,#{bmk}
            ,#{workType}
            ,#{dateM}
            )
        <selectKey keyProperty="careerId" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_HR' AND TABLE_NAME = 'DJ_EMP_CAREER'
        </selectKey>
    </insert>

    <select id="getMilitaryInfo" parameterType="map" resultType="map">
        /* getMilitaryInfo */
        SELECT
            *
        FROM
            CAM_HR.DJ_EMP_MILITARY_SVC_INFO
        WHERE
            MSI_INFO_ID = #{msiInfoId}
    </select>

    <insert id="setMilitaryInfo" parameterType="map">
        /*setMilitaryInfo*/
        INSERT INTO CAM_HR.DJ_EMP_MILITARY_SVC_INFO(
                 EMP_SEQ
                ,EMP_NAME
                ,MILITARY_SVC_TYPE
                ,M_UNFUL_REASON
                ,M_ENLIST_DAY
                ,M_DISCHARGE_DAY
                ,REG_EMP_SEQ
                ,REG_DATE
                ,M_LAST_RANK
                ,M_DIVISION
                ,MOS
        )VALUES (
                #{EMP_SEQ}
                ,#{EMP_NAME}
                ,#{mGubun}
                ,#{reason}
                ,#{sDate}
                ,#{eDate}
                ,#{EMP_SEQ}
                ,now()
                ,#{rank}
                ,#{mType}
                ,#{mDept}
                )
    </insert>
    <update id="setMilitaryInfoUpd" parameterType="map">
        /* setMilitaryInfoUpd */
        UPDATE
            CAM_HR.DJ_EMP_MILITARY_SVC_INFO
        SET
            MILITARY_SVC_TYPE = #{mGubun},
            M_UNFUL_REASON = #{reason},
            M_ENLIST_DAY = #{sDate},
            M_DISCHARGE_DAY = #{eDate},
            M_LAST_RANK = #{rank},
            M_DIVISION = #{mType},
            MOS = #{mDept},
            MOD_EMP_SEQ = #{EMP_SEQ}
        WHERE
            MSI_INFO_ID = #{msiInfoId}
    </update>
    <insert id="setFmailyInfo" parameterType="map">
        /*setFmailyInfo*/
        INSERT INTO CAM_HR.DJ_EMP_FAMILY_INFO(
                EMP_SEQ
                ,EMP_NAME
                ,FAMILY_CODE
                ,FAMILY_NAME
                ,FAMILY_BIRTH
                ,FAMILY_JOB
                ,INCLUDE_YN
                ,REG_EMP_SEQ
                ,REG_DATE
        )VALUES (
                #{EMP_SEQ}
                ,#{EMP_NAME}
                ,#{relation}
                ,#{fName}
                ,#{bDay}
                ,#{job}
                ,#{includeType}
                ,#{EMP_SEQ}
                ,now()
                )
    </insert>
    <insert id="setLicenceInfo" parameterType="map">
        /*setLicenceInfo*/
        INSERT INTO CAM_HR.DJ_EMP_CERTIFICATE(
                  EMP_SEQ
                 ,EMP_NAME
                 ,CERTIFICATE_NAME
                 ,CERTIFICATE_NUM
                 ,ACQUISITION_DAY
                 ,ISSUER
                 ,RMK
                 ,REG_EMP_SEQ
                 ,REG_DATE
        )VALUES (
                #{EMP_SEQ}
                ,#{EMP_NAME}
                ,#{licenseName}
                ,#{licenseNum}
                ,#{sDate}
                ,#{agency}
                ,#{bmk}
                ,#{EMP_SEQ}
                ,now()
                )
        <selectKey keyProperty="certificateId" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_HR' AND TABLE_NAME = 'DJ_EMP_CERTIFICATE'
        </selectKey>
    </insert>
    <insert id="setAppointingInfo" parameterType="map">
        INSERT INTO cam_hr.dj_emp_appoint(
                  EMP_SEQ
                 ,EMP_NAME
                 ,APPOINT_DAY
                 ,APPOINT_TITLE
                 ,APPOINT_COMMENT
                 ,RMK
                 ,REG_EMP_SEQ
                 ,REG_DATE
        )VALUES (
                #{EMP_SEQ}
                ,#{EMP_NAME}
                ,#{sDate}
                ,#{aGubun}
                ,#{reason}
                ,#{bmk}
                ,#{EMP_SEQ}
                ,now()
                )
    </insert>
    <!--인사기록카드 상벌 사항 추가-->
    <insert id="setRewardInfo" parameterType="map">
        /*setRewardInfo*/
        INSERT INTO CAM_HR.DJ_EMP_REWORD(
                  EMP_SEQ
                 ,ERP_EMP_SEQ
                 ,EMP_NAME
                 ,DEPT_SEQ
                 ,DEPT_NAME
                 ,TEAM_SEQ
                 ,TEAM_NAME
                 ,REWORD_DAY
                 ,REWORD_TYPE
                 ,REWORD_TYPE_NAME
                 ,RWD_ST_COMP
                 ,RWD_OFM
                 ,REG_EMP_SEQ
                 ,REG_DATE
                 ,RWD_ETC
        )VALUES (
                #{EMP_SEQ}
                ,#{regErpEmpCd}
                ,#{EMP_NAME}
                ,#{regDeptSeq}
                ,#{regDeptName}
                ,#{regTeamSeq}
                ,#{regTeamName}
                ,#{sDate}
                ,#{rGubunOutInType}
                ,#{rGubunAll}
                ,#{agency}
                ,#{rIssue}
                ,#{EMP_SEQ}
                ,now()
                ,''
                )
        <selectKey keyProperty="rewordId" resultType="Integer" order="BEFORE">
            SELECT AUTO_INCREMENT FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'CAM_HR' AND TABLE_NAME = 'DJ_EMP_REWORD'
        </selectKey>
    </insert>
    <insert id="setJobInfo" parameterType="map">
        INSERT INTO cam_hr.dj_emp_duty_info(
                EMP_SEQ
                , EMP_NAME
                , POSITON_NAME
                , WORK_PAY
                , DUTY_DETAIL
                , WORK_JOIN_DAY
                , WORK_LEAVE_DAY
                , REG_EMP_SEQ
                , REG_DATE
        )VALUES (
                #{EMP_SEQ}
                , #{EMP_NAME}
                , #{POSITON_NAME}
                , #{WORK_PAY}
                , #{DUTY_DETAIL}
                , #{sDate}
                , #{eDate}
                , #{EMP_SEQ}
                , NOW()
        )
    </insert>
    <insert id="setProposalInfo" parameterType="map">
        INSERT INTO cam_hr.dj_emp_proposal_info(
            EMP_SEQ
            ,EMP_NAME
            ,PROPOSAL_GUBUN
            ,PROPOSAL_DETAIL
            ,PROPOSAL_CHECK_CHOICE
            ,PROPOSAL_DATE
            ,REG_EMP_SEQ
            ,REG_DATE
        )VALUES (
            #{EMP_SEQ}
            ,#{EMP_NAME}
            ,#{pGubun}
            ,#{PROPOSAL_DETAIL}
            ,#{PROPOSAL_CHECK_CHOICE}
            ,#{sDate}
            ,#{EMP_SEQ}
            ,NOW()
        )
    </insert>

    <select id="getPersonRecordApplyList" parameterType="map" resultType="map">
        /*getPersonRecordApplyList*/
        SELECT
        row_number() over(ORDER BY a.reg_date DESC) num,
        A.*
        from
        (SELECT
        a.EDUCATIONAL_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_educational' AS 'type',
        '학력사항' AS 'typeName',
        'EDUCATIONAL_ID' AS 'key'
        FROM
        cam_hr.dj_emp_educational_tmp AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq
        union
        SELECT
        a.CAREER_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_career' AS 'type',
        '경력사항' AS 'typeName',
        'CAREER_ID' AS 'key'
        FROM
        cam_hr.dj_emp_career AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq
        UNION
        SELECT
        a.MSI_INFO_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_military_svc_info' AS 'type',
        '병력사항' AS 'typeName',
        'MSI_INFO_ID' AS 'key'
        FROM
        cam_hr.dj_emp_military_svc_info AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq
        UNION
        SELECT
        a.FAMILY_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_family_info' AS 'type',
        '가족사항' AS 'typeName',
        'FAMILY_ID' AS 'key'
        FROM
        cam_hr.dj_emp_family_info AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq
        UNION
        SELECT
        a.CERTIFICATE_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_certificate' AS 'type',
        '보유면허' AS 'typeName',
        'CERTIFICATE_ID' AS 'key'
        FROM
        cam_hr.dj_emp_certificate AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq
        UNION
        SELECT
        a.REWORD_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_reword' AS 'type',
        '상벌사항' AS 'typeName',
        'REWORD_ID' AS 'key'
        FROM
        cam_hr.dj_emp_reword AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq
        WHERE a.RWD_ETC = ''
        UNION
        SELECT
        a.DUTY_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_duty_info' AS 'type',
        '직무사항' AS 'typeName',
        'DUTY_ID' AS 'key'
        FROM
        cam_hr.dj_emp_duty_info AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq
        UNION
        SELECT
        a.PROPOSAL_ID AS 'ID',
        b.EMP_SEQ,
        b.DEPT_NAME,
        b.DEPT_TEAM_NAME,
        b.POSITION_NAME,
        a.EMP_NAME,
        date_format(IFNULL(a.mod_date, a.reg_date), '%Y-%m-%d') AS REG_DATE,
        a.REG_DATE as 'REG_DATE2',
        a.admin_approval,
        a.returnyn,
        a.APPLICATION_ACTIVE,
        'dj_emp_proposal_info' AS 'type',
        '제안제도' AS 'typeName',
        'PROPOSAL_ID' AS 'key'
        FROM
        cam_hr.dj_emp_proposal_info AS a
        LEFT join
        cam_hr.dj_emp_info AS b
        on
        a.emp_seq = b.emp_seq) AS A
        WHERE
        1=1
        <if test='name != null and !"".equals(name)'>
            and
            A.EMP_NAME LIKE CONCAT('%',#{name},'%')
        </if>
        <if test='drop1 != null and !"".equals(drop1)'>
            and
        <choose>
            <when test='"1".equals(drop1)'>
                A.typeName = '학력사항'
            </when>
            <when test='"2".equals(drop1)'>
                A.typeName = '경력사항'
            </when>
            <when test='"3".equals(drop1)'>
                A.typeName = '병력사항'
            </when>
            <when test='"4".equals(drop1)'>
                A.typeName = '가족사항'
            </when>
            <when test='"5".equals(drop1)'>
                A.typeName = '보유면허'
            </when>
            <!--<when test='"6".equals(drop1)'>
                A.typeName = '발령사항'
            </when>-->
            <when test='"7".equals(drop1)'>
                A.typeName = '상벌사항'
            </when>
            <when test='"8".equals(drop1)'>
                A.typeName = '직무사항'
            </when>
            <when test='"9".equals(drop1)'>
                A.typeName = '제안제도'
            </when>
        </choose>
        </if>
        <if test='status != null and !"".equals(status)'>
            and
        <choose>
            <when test='"1".equals(status)'>
                A.admin_approval ='N'
                and
        		A.returnyn ='N'
            </when>
            <when test='"2".equals(status)'>
                A.admin_approval ='N'
                and
        		A.returnyn ='Y'
            </when>
            <when test='"3".equals(status)'>
                A.admin_approval ='Y'
                and
        		A.returnyn ='N'
            </when>
        </choose>
        </if>
        <if test='startDate != null and !"".equals(startDate)'>
            <![CDATA[
		AND
		DATE_FORMAT(#{startDate}, '%Y%m%d') <= DATE_FORMAT(A.REG_DATE, '%Y%m%d')
		AND
		DATE_FORMAT(#{endDate}, '%Y%m%d') >= DATE_FORMAT(A.REG_DATE, '%Y%m%d')
		]]>
        </if>
        <if test='dept != null and !"".equals(dept)'>
            and
            A.DEPT_NAME = #{dept}
        </if>
        <if test='team != null and !"".equals(team)'>
            and
            A.DEPT_TEAM_NAME = #{team}
        </if>

        ORDER BY A.REG_DATE DESC
    </select>

    <select id="getPersonRecordApplyList2" parameterType="map" resultType="map">
        /* getPersonRecordApplyList2 */
        SELECT
            A.*
        from
            (SELECT
            a.EDUCATIONAL_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_educational' AS 'type',
            '학력사항' AS 'typeName',
            'EDUCATIONAL_ID' AS 'key'
            FROM
            cam_hr.dj_emp_educational AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq
            union
            SELECT
            a.CAREER_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_career' AS 'type',
            '경력사항' AS 'typeName',
            'CAREER_ID' AS 'key'
            FROM
            cam_hr.dj_emp_career AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq
            UNION
            SELECT
            a.MSI_INFO_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_military_svc_info' AS 'type',
            '병력사항' AS 'typeName',
            'MSI_INFO_ID' AS 'key'
            FROM
            cam_hr.dj_emp_military_svc_info AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq
            UNION
            SELECT
            a.FAMILY_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_family_info' AS 'type',
            '가족사항' AS 'typeName',
            'FAMILY_ID' AS 'key'
            FROM
            cam_hr.dj_emp_family_info AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq
            UNION
            SELECT
            a.CERTIFICATE_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_certificate' AS 'type',
            '보유면허' AS 'typeName',
            'CERTIFICATE_ID' AS 'key'
            FROM
            cam_hr.dj_emp_certificate AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq
            UNION
            SELECT
            a.REWORD_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_reword' AS 'type',
            '상벌사항' AS 'typeName',
            'REWORD_ID' AS 'key'
            FROM
            cam_hr.dj_emp_reword AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq
            WHERE a.RWD_ETC = ''
            UNION
            SELECT
            a.DUTY_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_duty_info' AS 'type',
            '직무사항' AS 'typeName',
            'DUTY_ID' AS 'key'
            FROM
            cam_hr.dj_emp_duty_info AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq
            UNION
            SELECT
            a.PROPOSAL_ID AS 'ID',
            b.EMP_SEQ,
            b.DEPT_NAME,
            b.DEPT_TEAM_NAME,
            b.POSITION_NAME,
            a.EMP_NAME,
            date_format(a.reg_date, '%Y-%m-%d') AS REG_DATE,
            a.REG_DATE as 'REG_DATE2',
            a.admin_approval,
            a.returnyn,
            'dj_emp_proposal_info' AS 'type',
            '제안제도' AS 'typeName',
            'PROPOSAL_ID' AS 'key'
            FROM
            cam_hr.dj_emp_proposal_info AS a
            LEFT join
            cam_hr.dj_emp_info AS b
            on
            a.emp_seq = b.emp_seq) AS A
        WHERE
            1=1
        AND
            A.EMP_SEQ = #{empSeq}

        <if test='drop1 != null and !"".equals(drop1)'>
            and
            <choose>
                <when test='"1".equals(drop1)'>
                    A.typeName = '학력사항'
                </when>
                <when test='"2".equals(drop1)'>
                    A.typeName = '경력사항'
                </when>
                <when test='"3".equals(drop1)'>
                    A.typeName = '병력사항'
                </when>
                <when test='"4".equals(drop1)'>
                    A.typeName = '가족사항'
                </when>
                <when test='"5".equals(drop1)'>
                    A.typeName = '보유면허'
                </when>
                <!--<when test='"6".equals(drop1)'>
                    A.typeName = '발령사항'
                </when>-->
                <when test='"7".equals(drop1)'>
                    A.typeName = '상벌사항'
                </when>
                <when test='"8".equals(drop1)'>
                    A.typeName = '직무사항'
                </when>
                <when test='"9".equals(drop1)'>
                    A.typeName = '제안제도'
                </when>
            </choose>
        </if>
        <if test='status != null and !"".equals(status)'>
            and
            <choose>
                <when test='"1".equals(status)'>
                    A.admin_approval ='N'
                    and
                    A.returnyn ='N'
                </when>
                <when test='"2".equals(status)'>
                    A.admin_approval ='N'
                    and
                    A.returnyn ='Y'
                </when>
                <when test='"3".equals(status)'>
                    A.admin_approval ='Y'
                    and
                    A.returnyn ='N'
                </when>
            </choose>
        </if>
        <if test='startDate != null and !"".equals(startDate)'>
            <![CDATA[
		AND
		DATE_FORMAT(#{startDate}, '%Y%m%d') <= DATE_FORMAT(A.REG_DATE, '%Y%m%d')
		AND
		DATE_FORMAT(#{endDate}, '%Y%m%d') >= DATE_FORMAT(A.REG_DATE, '%Y%m%d')
		]]>
        </if>

        ORDER BY a.reg_date2 DESC
    </select>

    <update id="setUpdateUserInfoModY" parameterType="map">
        UPDATE cam_hr.${TYPE}_tmp
        SET
            ADMIN_APPROVAL = 'Y',
            ADMIN_APPROVAL_DATE = NOW()
        WHERE
            EMP_SEQ = #{EMP_SEQ}
            and
            ${KEY} = #{ID}
    </update>
    <update id="setUpdateUserInfoModN" parameterType="map">
        UPDATE cam_hr.${TYPE}
        SET
            ADMIN_APPROVAL = 'N',
            ADMIN_APPROVAL_DATE = NOW()
        WHERE
            EMP_SEQ = #{EMP_SEQ}
          and
            ${KEY} = #{ID}
    </update>
        <update id="setUpdateUserInfoReturnY" parameterType="map">
        UPDATE cam_hr.${TYPE}
        SET
            RETURNYN = 'Y',
            RETURNYN_DATE = NOW()
        WHERE
            EMP_SEQ = #{EMP_SEQ}
            and
            ${KEY} = #{ID}
    </update>
    <update id="setUpdateUserInfoReturnN" parameterType="map">
        UPDATE cam_hr.${TYPE}
        SET
            RETURNYN = 'N',
            RETURNYN_DATE = NOW()
        WHERE
            EMP_SEQ = #{EMP_SEQ}
          and
            ${KEY} = #{ID}
    </update>
    <select id="getUserPersonnelinformList" parameterType="map" resultType="map">
        /* getUserPersonnelinformList */
        SELECT
            <![CDATA[
            (CASE WHEN CAST(SUBSTRING_INDEX(a.BEFOR_CAREER/12, '.', 1) AS UNSIGNED) >= 1
                  THEN CAST(SUBSTRING_INDEX(a.BEFOR_CAREER/12, '.', 1) AS UNSIGNED) ELSE 0
            END) AS prev_hire,
            (CASE WHEN CAST(SUBSTRING_INDEX(a.BEFOR_CAREER/12, '.', 1) AS UNSIGNED) >= 1
                  THEN CONCAT(CAST(a.BEFOR_CAREER AS UNSIGNED) - (CAST(SUBSTRING_INDEX(a.BEFOR_CAREER/12, '.', 1) AS UNSIGNED) * 12))
                  ELSE a.BEFOR_CAREER
            END) AS prev_hire_mon,
            ]]>
            SUBSTRING_INDEX(TRUNCATE(TIMESTAMPDIFF(month, a.JOIN_DAY, DATE_FORMAT(NOW(), '%Y-%m-%d')) / 12, 1), '.', 1) AS hire,
            CONCAT(SUBSTRING_INDEX(TRUNCATE(TIMESTAMPDIFF(month, a.JOIN_DAY, DATE_FORMAT(NOW(), '%Y-%m-%d')) / 12, 1), '.', -1) + 1) AS hire_mon,
            a.EMP_SEQ,
            a.ERP_EMP_SEQ,
            a.LOGIN_ID,
            a.LOGIN_PASSWD,
            a.EMP_NAME_KR,
            a.EMP_NAME_EN,
            a.EMP_NAME_CN,
            a.ATT_CARD_NUM,
            a.DEPT_SEQ,
            a.DEPT_NAME,
            a.DEPT_TEAM_NAME,
            (select dept_name from cam_hr.dj_dept_info where dept_seq = (select parent_dept_seq from cam_hr.dj_dept_info where dept_seq= a.DEPT_SEQ)) PARENT_DEPT_NAME,
            (select parent_dept_seq from cam_hr.dj_dept_info where dept_seq= a.DEPT_SEQ) AS DEPT_PARENT_SEQ,
            a.POSITION_CODE,
            a.POSITION_NAME,
            a.DUTY_CODE,
            (SELECT CM_CODE_NM FROM CAM_COMMON.DJ_COM_CODE WHERE CM_GROUP_CODE_ID = '3' AND CM_CODE = a.DUTY_CODE AND ACTIVE = 'Y') AS DUTY_NAME,
            a.GRADE_CODE,
            a.GRADE_NAME,
            a.POSITION_OR_DUTY,
            a.OCCUPATION_CODE,
            a.EMPLOY_GUBUN,
            a.JOIN_DAY,
            a.APPOINT_DAY,
            a.APPOINT_GUBUN,
            a.APPOINT_GUBUN_DETAIL,
            a.CTR_ST_DAY,
            a.CTR_EN_DAY,
            a.WEEK_WORK_TIME_TYPE,
            a.WEEK_WORK_TIME,
            a.BF_APPOINT_DAY,
            a.LOCAL_TALENT,
            a.WORK_FIELD_NAME,
            a.ZIP_CODE,
            a.ADDR,
            a.OLD_ADDR,
            a.ADDR_DETAIL,
            a.ADDR_REFERENCES,
            a.LEGAL_DOMICILE,
            a.HOME_TEL_NUM,
            a.MOBILE_TEL_NUM,
            a.OFFICE_TEL_NUM,
            a.EMAIL_ADDR,
            a.BDAY,
            a.GENDER_CODE,
            a.WEDDING_ACTIVE,
            a.IMPAIR_LEVEL_CODE,
            a.DEGREE_CODE,
            a.JOB_DETAIL,
            a.SPEC_CODE,
            a.DIV_FACTION,
            a.WORK_STATUS_CODE,
            a.RESIGN_DAY,
            a.PHOTO_FILE_ID,
            a.DEPT_MG_YN,
            a.ADMIN_APPROVE_YN,
            a.SECRET_YN,
            a.SEC_AUTHORIZE_DATE,
            a.SEC_RELEASE_DATE,
            a.ACTIVE,
            a.REG_EMP_SEQ,
            a.REG_DATE,
            (SELECT EMP_NAME_KR FROM CAM_HR.DJ_EMP_INFO WHERE EMP_SEQ = a.MOD_EMP_SEQ GROUP BY EMP_SEQ) AS MOD_EMP_NAME,
            DATE_FORMAT(a.MOD_DATE, '%Y-%m-%d %H:%i:%s') AS MOD_DATE,
            a.RES_REGIS_NUM,
            a.CHECK_PASSWD,
            a.CAPS_NUM,
            a.HOME_PAGE_ACTIVE,
            a.BEFOR_CAREER,
            a.BS_ELAPSED_YEAR,
            a.ELAPSED_YEAR,
            a.ACCOUNT_HOLDER,
            a.BANK_NAME,
            a.ACCOUNT_NUM,
            a.CAR_ACTIVE,
            a.CAR_NUM,
            a.EMG_TEL_NUM,
            a.BLOOD_TYPE,
            a.WEDDING_DAY,
            a.HOBBY,
            a.SPECIALITY,
            a.RELIGION,
            a.HEIGHT,
            a.WEIGHT,
            a.VISIONL,
            a.VISIONR,
            a.DIVISION,
            a.DIVISION_SUB,
            a.DUZON_CODE,
            a.LUNAR_CAL,
            a.CTR_ST_DAY,
            a.CTR_EN_DAY,
            a.WEEK_WORK_TIME,
            a.NICK_NAME,
            a.CONTRACT,
            a.SCHOOL,
            a.DEGREE,
            a.DEPARTMENT,
            a.GRADE,
            a.STUDENT_ID,
            a.QUALIFICATION,
            a.LAST_DEGREE,
            a.CAREER,
            a.MILITARY,
            a.SIGNIFICANT,
            a.TEMP_DIVISION
        FROM
            cam_hr.dj_emp_info AS a
        WHERE
            a.EMP_SEQ = #{empSeq};
    </select>

    <update id="setUserResignReg" parameterType="map">
        /* setUserResignReg */
        UPDATE
            CAM_HR.DJ_EMP_INFO
        SET
            WORK_STATUS_CODE = 'N',
            DIVISION = '9999',
            RESIGN_DAY = #{resignDay},
            RESIGN_REASON = #{resignReason},
            MOD_DATE = NOW(),
            MOD_EMP_SEQ = #{regEmpSeq}
        WHERE
            EMP_SEQ = #{empSeq}
    </update>

    <update id="setUserDel" parameterType="map">
        /* setUserDel */
        UPDATE
            CAM_HR.DJ_EMP_INFO
        SET
            ACTIVE = 'N',
            MOD_DATE = NOW(),
            MOD_EMP_SEQ = #{regEmpSeq}
        WHERE
            EMP_SEQ = #{empSeq}
    </update>

    <update id="setUserInfoReqUpd" parameterType="map">
        /* setUserInfoReqUpd */
        UPDATE
        CAM_COMMON.DJ_FILE_INFO
        SET
        <if test='photoFileId != null and !"".equals(photoFileId)'>
            PHOTO_FILE_ID = #{photoFileId}
        </if>
        WHERE
        EMP_SEQ = #{empSeq}
    </update>

    <select id="getUserInfoModDetail" resultType="map" parameterType="map">
        select
            a.*
        from
            CAM_HR.${type} as a
        where
            a.${key} = #{id}
    </select>

    <select id="getKeyInfo" resultType="map" parameterType="map">
        /* getKeyInfo */
        select
            a.*
        from
            CAM_HR.${type} as a
        where
            a.${key} = #{id}
    </select>

<!--홈페이지 게시 포함
    <update id="setUserReqDetailUpdate" parameterType="map">
            /*setUserReqDetailUpdate*/
            UPDATE CAM_HR.DJ_EMP_INFO
            SET EMP_NAME_KR = #{EMP_NAME_KR},
            <if test="PASSCHANGE != null and PASSCHANGE != ''">
                LOGIN_PASSWD = #{LOGIN_PASSWD},
            </if>
            <if test="WEDDING_DAY != null and WEDDING_DAY != ''">
            WEDDING_DAY = #{WEDDING_DAY},
            </if>
            <if test="GRADE_NAME != null and GRADE_NAME != ''">
                GRADE_NAME = #{GRADE_NAME},
            </if>
            <if test="DEGREE_CODE != null and DEGREE_CODE != ''">
                DEGREE_CODE = #{DEGREE_CODE},
            </if>
            RES_REGIS_NUM = #{RES_REGIS_NUM},
            CAPS_NUM = #{CAPS_NUM},
            DUTY_CODE = #{DUTY_CODE},
            DUTY_NAME = #{DUTY_NAME},
            POSITION_CODE = #{POSITION_CODE},
            POSITION_NAME = #{POSITION_NAME},
            DEPT_NAME = #{DEPT_NAME},
            DEPT_SEQ = #{DEPT_SEQ},
            DEPT_TEAM_NAME = #{DEPT_TEAM_NAME},
            JOB_DETAIL = #{JOB_DETAIL},
            BEFOR_CAREER = #{BEFOR_CAREER},
            ACCOUNT_HOLDER = #{ACCOUNT_HOLDER},
            BANK_NAME = #{BANK_NAME},
            ACCOUNT_NUM = #{ACCOUNT_NUM},
            ZIP_CODE = #{ZIP_CODE},
            ADDR = #{ADDR},
            ADDR_DETAIL = #{ADDR_DETAIL},
            OFFICE_TEL_NUM = #{OFFICE_TEL_NUM},
            MOBILE_TEL_NUM = #{MOBILE_TEL_NUM},
            EMAIL_ADDR = #{EMAIL_ADDR},
            CAR_NUM = #{CAR_NUM},
            EMP_NAME_CN = #{EMP_NAME_CN},
            EMP_NAME_EN = #{EMP_NAME_EN},
            EMG_TEL_NUM = #{EMG_TEL_NUM},
            LEGAL_DOMICILE = #{LEGAL_DOMICILE},
            HOBBY = #{HOBBY},
            RELIGION = #{RELIGION},
            SPECIALITY = #{SPECIALITY},
            WEIGHT = #{WEIGHT},
            HEIGHT = #{HEIGHT},
            VISIONL = #{VISIONL},
            VISIONR = #{VISIONR},
            HOME_PAGE_ACTIVE = #{HOME_PAGE_ACTIVE},
            WEDDING_ACTIVE = #{WEDDING_ACTIVE},
            BLOOD_TYPE = #{BLOOD_TYPE},
            DIVISION = #{division},
            DIVISION_SUB = #{divisionSub},
            MOD_EMP_SEQ = #{regEmpSeq},
            MOD_DATE = NOW(),
            CAR_ACTIVE = #{CAR_ACTIVE},
            JOIN_DAY = #{JOIN_DAY},
            OCCUPATION_CODE = #{OCCUPATION_CODE},
            LUNAR_CAL = #{LUNAR_CAL},
            CTR_ST_DAY = #{CTR_ST_DAY},
            CTR_EN_DAY = #{CTR_EN_DAY},
            WEEK_WORK_TIME = #{WEEK_WORK_TIME},
            NICK_NAME = #{NICK_NAME},
            CONTRACT = #{CONTRACT},
            SCHOOL = #{SCHOOL},
            DEGREE = #{DEGREE},
            DEPARTMENT = #{DEPARTMENT},
            GRADE = #{GRADE},
            STUDENT_ID = #{STUDENT_ID},
            QUALIFICATION = #{QUALIFICATION},
            LAST_DEGREE = #{LAST_DEGREE},
            CAREER = #{CAREER},
            MILITARY = #{MILITARY},
            SIGNIFICANT = #{SIGNIFICANT},
            BDAY = #{BDAY},
            TEMP_DIVISION = #{TEMP_DIVISION}
        WHERE EMP_SEQ = #{TARGET_EMP_SEQ}
    </update>-->

    <update id="setUserReqDetailUpdate" parameterType="map">
        /*setUserReqDetailUpdate*/
        UPDATE CAM_HR.DJ_EMP_INFO
        SET EMP_NAME_KR = #{EMP_NAME_KR},
        <if test="PASSCHANGE != null and PASSCHANGE != ''">
            LOGIN_PASSWD = #{LOGIN_PASSWD},
        </if>
        <if test="WEDDING_DAY != null and WEDDING_DAY != ''">
            WEDDING_DAY = #{WEDDING_DAY},
        </if>
        <if test="GRADE_NAME != null and GRADE_NAME != ''">
            GRADE_NAME = #{GRADE_NAME},
        </if>
        <if test="DEGREE_CODE != null and DEGREE_CODE != ''">
            DEGREE_CODE = #{DEGREE_CODE},
        </if>
        RES_REGIS_NUM = #{RES_REGIS_NUM},
        CAPS_NUM = #{CAPS_NUM},
        DUTY_CODE = #{DUTY_CODE},
        DUTY_NAME = #{DUTY_NAME},
        POSITION_CODE = #{POSITION_CODE},
        POSITION_NAME = #{POSITION_NAME},
        DEPT_NAME = #{DEPT_NAME},
        DEPT_SEQ = #{DEPT_SEQ},
        DEPT_TEAM_NAME = #{DEPT_TEAM_NAME},
        JOB_DETAIL = #{JOB_DETAIL},
        BEFOR_CAREER = #{BEFOR_CAREER},
        ACCOUNT_HOLDER = #{ACCOUNT_HOLDER},
        BANK_NAME = #{BANK_NAME},
        ACCOUNT_NUM = #{ACCOUNT_NUM},
        ZIP_CODE = #{ZIP_CODE},
        ADDR = #{ADDR},
        ADDR_DETAIL = #{ADDR_DETAIL},
        OFFICE_TEL_NUM = #{OFFICE_TEL_NUM},
        MOBILE_TEL_NUM = #{MOBILE_TEL_NUM},
        EMAIL_ADDR = #{EMAIL_ADDR},
        CAR_NUM = #{CAR_NUM},
        EMP_NAME_CN = #{EMP_NAME_CN},
        EMP_NAME_EN = #{EMP_NAME_EN},
        EMG_TEL_NUM = #{EMG_TEL_NUM},
        LEGAL_DOMICILE = #{LEGAL_DOMICILE},
        HOBBY = #{HOBBY},
        RELIGION = #{RELIGION},
        SPECIALITY = #{SPECIALITY},
        WEIGHT = #{WEIGHT},
        HEIGHT = #{HEIGHT},
        VISIONL = #{VISIONL},
        VISIONR = #{VISIONR},
        WEDDING_ACTIVE = #{WEDDING_ACTIVE},
        BLOOD_TYPE = #{BLOOD_TYPE},
        DIVISION = #{division},
        DIVISION_SUB = #{divisionSub},
        MOD_EMP_SEQ = #{regEmpSeq},
        MOD_DATE = NOW(),
        CAR_ACTIVE = #{CAR_ACTIVE},
        JOIN_DAY = #{JOIN_DAY},
        OCCUPATION_CODE = #{OCCUPATION_CODE},
        LUNAR_CAL = #{LUNAR_CAL},
        CTR_ST_DAY = #{CTR_ST_DAY},
        CTR_EN_DAY = #{CTR_EN_DAY},
        WEEK_WORK_TIME = #{WEEK_WORK_TIME},
        NICK_NAME = #{NICK_NAME},
        CONTRACT = #{CONTRACT},
        SCHOOL = #{SCHOOL},
        DEGREE = #{DEGREE},
        DEPARTMENT = #{DEPARTMENT},
        GRADE = #{GRADE},
        STUDENT_ID = #{STUDENT_ID},
        QUALIFICATION = #{QUALIFICATION},
        LAST_DEGREE = #{LAST_DEGREE},
        CAREER = #{CAREER},
        MILITARY = #{MILITARY},
        SIGNIFICANT = #{SIGNIFICANT},
        BDAY = #{BDAY},
        TEMP_DIVISION = #{TEMP_DIVISION}
        WHERE EMP_SEQ = #{TARGET_EMP_SEQ}
    </update>

    <select id="getUserImageInfo" resultType="map" parameterType="map">
        /* getUserImageInfo */
        SELECT
            IM.IMAGE_ID,
            IM.EMP_SEQ,
            IM.SIGN_IMAGE_PK,
            IM.ID_IMAGE_PK,
            IM.PERSONAL_IMAGE_PK
        FROM
            CAM_INSIDE.DJ_IMAGE_MANAGE IM
        WHERE
            IM.EMP_SEQ = #{empSeq}
    </select>

    <insert id="setUserImageReq" parameterType="map">
        /* setUserImageReq */
        INSERT INTO CAM_INSIDE.DJ_IMAGE_MANAGE(
            EMP_SEQ,
        <if test='signImg != 0'>
            SIGN_IMAGE_PK,
        </if>
        <if test='idImg != 0'>
            ID_IMAGE_PK,
        </if>
        <if test='personalImg != 0'>
            PERSONAL_IMAGE_PK,
        </if>
            REG_EMP_SEQ,
            REG_DATE
        ) VALUES (
            #{empSeq},
        <if test='signImg != 0'>
            #{signImg},
        </if>
        <if test='idImg != 0'>
            #{idImg},
        </if>
        <if test='personalImg != 0'>
            #{personalImg},
        </if>
            #{loginEmpSeq},
            NOW()
        )
    </insert>

    <update id="setUserImageUpd" parameterType="map">
        /* setUserImageUpd */
        UPDATE
            CAM_INSIDE.DJ_IMAGE_MANAGE
        SET
            <if test='signImg != 0'>
                SIGN_IMAGE_PK = #{signImg},
            </if>
            <if test='idImg != 0'>
                ID_IMAGE_PK = #{idImg},
            </if>
            <if test='personalImg != 0'>
                PERSONAL_IMAGE_PK = #{personalImg},
            </if>
            MOD_EMP_SEQ = #{loginEmpSeq},
            MOD_DATE = NOW()
        WHERE
            EMP_SEQ = #{empSeq}
    </update>

    <update id="setBasicInfo" parameterType="map">
        /* setBasicInfo */
        UPDATE
            CAM_HR.DJ_EMP_INFO
        SET
            EMP_NAME_CN = #{empNameCn},
            BDAY = #{bDay},
            ZIP_CODE = #{zipCode},
            ADDR = #{addr},
            OLD_ADDR = #{oldAddr},
            ADDR_DETAIL = #{addrDetail},
            OFFICE_TEL_NUM = #{officeTelNum},
            EMG_TEL_NUM = #{emgTelNum},
            CAR_ACTIVE = #{carActive},
            CAR_NUM = #{carNum},
            MOD_EMP_SEQ = #{regEmpSeq},
            MOD_DATE = NOW()
        WHERE
            EMP_SEQ = #{empSeq}
    </update>

    <!--인사기록카드 - 학력사항 삭제-->
    <!--<update id="setEduDelete" parameterType="java.util.List">
        /* setEduDelete */
        UPDATE
        CAM_HR.DJ_EMP_EDUCATIONAL
        SET
        APPLICATION_ACTIVE = 'D', MOD_DATE = NOW()
        WHERE
        EDUCATIONAL_ID IN
        (
        <foreach collection="list" item="item" separator=",">
            #{item}
        </foreach>
        )
    </update>-->


    <!--인사기록카드 - 가족사항 삭제    -->
    <update id="setFamilyDelete" parameterType="java.util.List">
        /* setFamilyDelete */
        UPDATE
        CAM_HR.DJ_EMP_FAMILY_INFO
        SET
        APPLICATION_ACTIVE = 'D', MOD_DATE = NOW()
        WHERE
        FAMILY_ID IN
        (
        <foreach collection="list" item="item" separator=",">
            #{item}
        </foreach>
        )
    </update>


    <!--인사기록카드 - 보유면허 삭제-->
    <update id="setLicenseDelete" parameterType="java.util.List">
        /* setLicenseDelete */
        UPDATE
        CAM_HR.DJ_EMP_CERTIFICATE
        SET
        APPLICATION_ACTIVE = 'D', MOD_DATE = NOW()
        WHERE
        CERTIFICATE_ID IN
        (
        <foreach collection="list" item="item" separator=",">
            #{item}
        </foreach>
        )
    </update>

    <!--인사기록카드 - 직무사항 삭제-->
    <update id="setJobDelete" parameterType="java.util.List">
        /* setJobDelete */
        UPDATE
        CAM_HR.DJ_EMP_DUTY_INFO
        SET
        APPLICATION_ACTIVE = 'D', MOD_DATE = NOW()
        WHERE
        DUTY_ID IN
        (
        <foreach collection="list" item="item" separator=",">
            #{item}
        </foreach>
        )
    </update>

    <!--인사기록카드 - 상벌사항 삭제-->
    <update id="setRewordDelete" parameterType="java.util.List">
        /* setRewordDelete */
        UPDATE
        CAM_HR.DJ_EMP_REWORD
        SET
        APPLICATION_ACTIVE = 'D', MOD_DATE = NOW()
        WHERE
        REWORD_ID IN
        (
        <foreach collection="list" item="item" separator=",">
            #{item}
        </foreach>
        )
    </update>

    <!--인사기록카드 - 제안제도 삭제-->
    <update id="setProposalDelete" parameterType="java.util.List">
        /* setProposalDelete */
        UPDATE
        CAM_HR.DJ_EMP_PROPOSAL_INFO
        SET
        APPLICATION_ACTIVE = 'D', MOD_DATE = NOW()
        WHERE
        PROPOSAL_ID IN
        (
        <foreach collection="list" item="item" separator=",">
            #{item}
        </foreach>
        )
    </update>

    <select id="getEduinfoList" parameterType="map" resultType="map">
        /* getEduinfoList */
        SELECT
            *
        FROM
            CAM_HR.DJ_EMP_EDUCATIONAL
        WHERE
            EDUCATIONAL_ID = #{pk}
    </select>

    <update id="setInGradeFileNoUpd" parameterType="map">
        /* setInGradeFileNoUpd */
        UPDATE
            CAM_HR.DJ_EMP_EDUCATIONAL
        SET
            GRADE_NO = #{gradeFileNo}
        WHERE
            EDUCATIONAL_ID = #{educationalId}
    </update>

    <update id="setInScoreFileNoUpd" parameterType="map">
        /* setInScoreFileNoUpd */
        UPDATE
            CAM_HR.DJ_EMP_EDUCATIONAL
        SET
            SCORE_NO = #{socreFileNo}
        WHERE
            EDUCATIONAL_ID = #{educationalId}
    </update>

    <update id="setInAddFileNoUpd" parameterType="map">
        /* setInAddFileNoUpd */
        UPDATE
            CAM_HR.DJ_EMP_CAREER
        SET
            ADD_NO = #{addFileNo}
        WHERE
            CAREER_ID = #{careerId}
    </update>

    <update id="setInCertificateFileNoUpd" parameterType="map">
        /* setInCertificateFileNoUpd */
        UPDATE
            CAM_HR.DJ_EMP_CERTIFICATE
        SET
            CERTIFICATE_ADD_NO = #{certificateFileNo}
        WHERE
            CERTIFICATE_ID = #{certificateId}
    </update>

    <update id="setInRewardAddFileNoUpd" parameterType="map">
        /* setInRewardAddFileNoUpd */
        UPDATE
            CAM_HR.DJ_EMP_REWORD
        SET
            REWARD_ADD_NO = #{rewardAddFileNo}
        WHERE
            REWORD_ID = #{rewordId}
    </update>
</mapper>